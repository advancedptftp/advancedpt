@model DataLayer.Models.DMEClinicalStaffPrescription
@using DataLayer;
@{
    ViewBag.Title = "Knee Brace Custom Order";
}

<section class="bodyinner">
    @*@using (Html.BeginForm("Create", "KneeBraceCustomForm", FormMethod.Post, new { name = "Create", id = "Create" }))
        {*@

    <div class="bodyleft">


        @Html.Partial("~/Views/Shared/_LeftPart.cshtml")
    </div>
    <div class="bodyright">

        <div class="report-form clearfix">
            <h2>BREG Custom Knee Brace Order Form (HCPCS Code: L1846)</h2>
            @*<div class="p_bot15"><strong>*MEDICARE PATIENTS: DO NOT PROCEED IF THEY HAVE BEEN ISSUED A ‘KNEE BRACE’ IN THE PAST 5 YEARS.</strong></div>*@

            <hr>
            @using (Html.BeginForm("Create1", "KneeBraceCustomForm", FormMethod.Post, new { name = "Create2", id = "Create2" }))
            {
                <div id="dvFirst">
                    @Html.AntiForgeryToken()

                    @Html.HiddenFor(e => e.Prescription.DMEForm_Id)
                    @*@Html.Hidden("CreatedOn", DateTime.Now)*@
                    @Html.Hidden("HCPCSCode", "L1846")
                    @Html.HiddenFor(e => e.Prescription.DMEFormCode)
                    @Html.HiddenFor(e => e.Prescription.CreatedOn)
                    @Html.HiddenFor(e => e.KneeBraceCustomForm.KneeBraceCustomForm_Id)
                    @Html.HiddenFor(e => e.Prescription.DMEClinicalStaffPrescription_Id)
                    @Html.HiddenFor(e => e.KneeBraceCustomForm.CreatedOn)
                    @Html.HiddenFor(e => e.KneeBraceCustomForm.CreatedBy)
                    @Html.HiddenFor(e => e.PurchaseOrderItemDetail.DMEForm_Id)
                    @Html.HiddenFor(e => e.KneeBraceCustomForm.HCPCSCode)
                    @Html.HiddenFor(e => e.KneeBraceCustomForm.Patient_Id)
                    @if (ViewBag.Error != null)
                    {
                        @Html.Raw(ViewBag.Error)
                    }

                    <div id="dvPrescription" class="todo_inner">
                        <h3>Description:</h3>
                        <div class="row p_bot20">
                            <div class="col-sm-6">
                                <div class="p_bot05">
                                    <label class="checkbox-inline">
                                        @Html.CheckBoxFor(e => e.KneeBraceCustomForm.IsCustomOAMedialOffLoader_01208, new { @class = "checkbox-inline checkone", onclick = "fnchooseFreestyle(1);" })
                                        <span id="Desc_1">01208</span>
                                        <span id="Desc_11">Custom OA Medial Off-Loader</span>
                                    </label>
                                </div>
                                <div class="p_bot05">
                                    <label class="checkbox-inline">
                                        @Html.CheckBoxFor(e => e.KneeBraceCustomForm.IsCustomOALateralOffLoader_01300, new { @class = "checkbox-inline checkone", onclick = "fnchooseFreestyle(2);" })
                                        <span id="Desc_2">01300</span>
                                        <span id="Desc_22">Custom OA Lateral Off-Loader</span>
                                    </label>
                                </div>
                                <div class="p_bot05">
                                    <label class="checkbox-inline">
                                        @Html.CheckBoxFor(e => e.KneeBraceCustomForm.IsCustomLigamentBrace_01207, new { @class = "checkbox-inline checkone", onclick = "fnchooseFreestyle(3);" })
                                        <span id="Desc_3">01207</span>
                                        <span id="Desc_33">Custom OA Lateral Off-Loader</span>
                                        <span id="CheckBoxAsRadioButton" class="validateMsg"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="rightgray">
                                    <h4>L1846 Code Includes the Following:</h4>
                                    <ul>
                                        <li>Orthosis</li>
                                        <li>All Straps, Closures and Padding</li>
                                        <li>Fitting & Adjustment</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <h3>Fitting</h3>
                        <div class="row">
                            <div class="col-sm-9">
                                <div class="borderbox">
                                    <div class="row innerborder">
                                        <div class="col-sm-5 p_top10"><strong>1. Thigh Circumference:</strong></div>
                                        <div class="col-sm-7">

                                            <div class="form-group">
                                                @Html.TextBoxFor(m => m.KneeBraceCustomForm.Fitting_ThighCircumference, new { @class = "form-control shortfield" })
                                                <label for="exampleInputName2" class=" p_left10">inches (6 inches above mid-patella)</label>
                                                <br />
                                                @Html.ValidationMessageFor(model => model.KneeBraceCustomForm.Fitting_ThighCircumference)
                                                <span id="Fitting_ThighCircumference" class="validateMsg"></span>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="row innerborder">
                                        <div class="col-sm-5 p_top10"><strong>2. Calf Circumference:</strong></div>
                                        <div class="col-sm-7">

                                            <div class="form-group">
                                                @Html.TextBoxFor(m => m.KneeBraceCustomForm.Fitting_CalfCircumference, new { @class = "form-control shortfield" })
                                                <label for="exampleInputName2" class=" p_left10">inches (6 inches below mid-patella)</label>
                                                <br />
                                                @Html.ValidationMessageFor(model => model.KneeBraceCustomForm.Fitting_CalfCircumference)
                                                <span id="Fitting_CalfCircumference" class="validateMsg"></span>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="row innerborder">
                                        <div class="col-sm-5 p_top10"><strong>3. Knee Offset:</strong></div>
                                        <div class="col-sm-7">

                                            <div class="form-group">
                                                @Html.TextBoxFor(m => m.KneeBraceCustomForm.Fitting_KneeOffset, new { @class = "form-control shortfield" })
                                                <label for="exampleInputName2" class=" p_left10">milimeter (push in plunger on tool)</label>
                                                <br />
                                                @Html.ValidationMessageFor(model => model.KneeBraceCustomForm.Fitting_KneeOffset)
                                                <span id="Fitting_KneeOffset" class="validateMsg"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row innerborder">
                                        <div class="col-sm-5 p_top10"><strong>4. Knee Width:</strong></div>
                                        <div class="col-sm-7">

                                            <div class="form-group">
                                                @Html.TextBoxFor(m => m.KneeBraceCustomForm.Fitting_KneeWidth, new { @class = "form-control shortfield" })
                                                <label for="exampleInputName2" class=" p_left10">milimeter (use width caliper)</label>
                                                <span id="Fitting_KneeWidth" class="validateMsg"></span>
                                                <br />
                                                @Html.ValidationMessageFor(model => model.KneeBraceCustomForm.Fitting_KneeWidth)
                                            </div>

                                        </div>
                                    </div>

                                </div>

                                <div class="borderbox">
                                    <div class="row">
                                        <div class="col-md-3 col-sm-12"><strong>Circle</strong></div>
                                        <div class="col-md-9 col-sm-12">
                                            <span class=" p_rig30">
                                                <label class="radio-inline"><input name="optradio" type="radio">@Html.RadioButtonFor(m => m.KneeBraceCustomForm.CirclePosition, "RIGHT")RIGHT</label>
                                                <label class="radio-inline">@Html.RadioButtonFor(m => m.KneeBraceCustomForm.CirclePosition, "LEFT")LEFT</label>
                                                <span id="CirclePosition" class="validateMsg"></span>
                                                <br />
                                                @Html.ValidationMessageFor(m => m.KneeBraceCustomForm.CirclePosition)
                                            </span>
                                        </div>
                                        <div class="col-md-3 col-sm-12"><strong>Gender</strong> </div>
                                        <div class="col-md-9 col-sm-12">

                                            <span class="p_rig25">
                                                <label class="radio-inline">@Html.RadioButtonFor(m => m.KneeBraceCustomForm.Gender, "M")Male</label>
                                                <label class="radio-inline">@Html.RadioButtonFor(m => m.KneeBraceCustomForm.Gender, "F")Female</label>
                                                <span id="Gender" class="validateMsg"></span>
                                                <br />
                                                @Html.ValidationMessageFor(m => m.KneeBraceCustomForm.Gender)
                                            </span>
                                        </div>
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-sm-5 col-md-5 form-group">
                                        <label>Patient Name</label>
                                        @Html.TextBoxFor(m => m.KneeBraceCustomForm.Patient_Name, new { @class = "form-control" })
                                        <span id="Patient_Name" class="validateMsg"></span>
                                        <br />
                                        @Html.ValidationMessageFor(m => m.KneeBraceCustomForm.Patient_Name)
                                    </div>
                                    <div class="col-sm-5 col-md-5 form-group">
                                        <label for="date">DOB</label>
                                        @Html.TextBoxFor(m => m.KneeBraceCustomForm.DOB, new { @class = "form-control datepicker datepicker-bg CustomDateFormat", style = "width:100%;", @Value = @Model.KneeBraceCustomForm.DOB.GetExactValue() })
                                        <span id="PatientDOB" class="validateMsg"></span>
                                        <br />
                                        @Html.ValidationMessageFor(m => m.KneeBraceCustomForm.DOB)
                                    </div>

                                    <div class="col-sm-2 form-group" style="padding-top:25px;">
                                        <!-- Trigger the modal with a button -->
                                        <button type="button" id="btnTo" class="btn btn-info btn-lg PatientEmailSearchModal" data-toggle="modal" data-id="To" data-target="#PatientEmailSearchModal">Search Patient</button>
                                    </div>
                                </div>

                            </div>
                            <div class="col-sm-3"><img src="@Url.Content("~/Images/pic1.png")" alt="" /></div>
                        </div>


                        <div class="outerf">
                            <div class="stepheading"><strong>1. Clinical Staff </strong> <i>prescription</i></div>
                            <div class="hiddenform">
                                <div class="row">
                                    <div class="col-sm-4 col-md-5 form-group">
                                        Diagnosis
                                    </div>
                                    <div class="col-sm-4 col-md-5 form-group">
                                        ICD-10 Code
                                    </div>
                                    <div class="col-sm-4 col-md-2 form-group">

                                    </div>
                                </div>
                                <div id="dvDiagnosis">
                                    <script>
                                        var counter = 0;
                                    </script>
                                    @for (int i = 0; i < Model.DMEDiognosis.Count; i++)
                                    {
                                    <div class="row">
                                        <div class="col-sm-4 col-md-5 form-group">
                                            @Html.TextBoxFor(e => e.DMEDiognosis[i].Diagnosis_Desc, new { @class = "form-control Disease_nameForICD" })
                                            <span id="Diagnosis_Desc" class="validateMsg"></span>
                                        </div>
                                        <div class="col-sm-4 col-md-5 form-group">
                                            @Html.TextBoxFor(e => e.DMEDiognosis[i].ICD10Code, new { @class = "form-control ICD_CodeForICD" })
                                            <span id="ICD10Code" class="validateMsg"></span>
                                        </div>
                                        <div class="col-sm-4 col-md-2 form-group">
                                            <button id="addRows" class="addbutt" type="button" style="margin-top:0;" title="Add New Diagnosis"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                            @Html.HiddenFor(e => e.DMEDiognosis[i].DMEDiagnosis_Id, new { @class = "icdidForICD" })
                                        </div>
                                    </div>
                                    <script>
                                            counter += 1;
                                    </script>
                                    }
                                </div>
                                <div class="p_bot15">
                                    <button type="button" class="btn btn-primary pull-left" onclick="OpenDialog()">Search ICD-10</button>
                                    <div class="clearfix"></div>
                                </div>
                                <div>
                                    <div class="row form-group">
                                        <div class="col-sm-12"></div>
                                    </div>

                                </div>

                                <div class="row">
                                    <div class="col-sm-12 col-md-6 form-group">
                                        <label class="checkbox-inline"><input name="optradio" type="checkbox">Item Requested By</label>
                                        <div class="p_left15">
                                            <label class="checkbox-inline">
                                                @Html.CheckBoxFor(e => e.Prescription.IsItemReqByTherapist, new { @class = "checkone1", onchange = "fnEnableDisableTextbox(this,'Prescription_Therapist_Name');" })
                                                Therapist
                                            </label>
                                            <div class="row">
                                                <div class="col-sm-12 col-md-12 form-group p_top10">
                                                    @Html.TextBoxFor(e => e.Prescription.Therapist_Name, new { @class = "form-control enabledisable" })
                                                    <span id="Therapist_Name" class="validateMsg"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div>

                                    <div class="p_left15">
                                        <label class="checkbox-inline">
                                            @Html.CheckBoxFor(e => e.Prescription.IsItemReqByPatient, new { @class = "checkone1", onchange = "fnEnableDisableTextbox(this,'');" })
                                            Patient
                                        </label>

                                    </div>
                                    <div class="p_left15">
                                        <label class="checkbox-inline">
                                            @Html.CheckBoxFor(e => e.Prescription.IsItemReqByDoctor, new { @class = "checkone1", onchange = "fnEnableDisableTextbox(this,'Prescription_Doctor_Name');" })
                                            Doctor
                                        </label>

                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 form-group p_top10">
                                                @Html.TextBoxFor(e => e.Prescription.Doctor_Name, new { @class = "form-control enabledisable" })
                                                <span id="Doctor_Name" class="validateMsg"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-6 col-md-6 form-group">
                                        <label class="checkbox-inline">
                                            @Html.CheckBoxFor(e => e.Prescription.IsCompleteLOMN, new { @class = "" })
                                            Complete <b>Letter of Medical Necessity</b>
                                        </label>
                                    </div>
                                    <div class="col-sm-6 col-md-6 form-group">
                                        <div class="col-sm-1 p_top10">Int</div>
                                        <div class="col-sm-5">
                                            @Html.TextBoxFor(e => e.Prescription.CompleteLOMN_Initial, new { @class = "form-control" })
                                            <span id="CompleteLOMN_Initial" class="validateMsg"></span>
                                        </div>
                                    </div>
                                </div>



                                <div class="row">
                                    <div class="col-sm-12 col-md-12 form-group">
                                        <label class="checkbox-inline">
                                            @Html.CheckBoxFor(e => e.Prescription.IsGiveFormAndLOMN, new { @class = "" })
                                            Give FORM &amp; LETTER of Med.Nec. to Office Staff
                                        </label>
                                    </div>
                                </div>
                            </div>
                            @Html.HiddenFor(e => e.PurchaseOrderItemDetail.PO_Item_Desc, new { @id = "hdnItemDesc" })
                            @Html.HiddenFor(e => e.PurchaseOrderItemDetail.PO_Item_Code, new { @id = "hdnItemCode" })
                            <div class="subbutt">
                                <button type="submit" class="btn btn-orange pull-right" onclick="return validateInputs();">Submit</button>
                                <div class="clearfix"></div>
                            </div>

                        </div>
                    </div>
                    <hr>
                </div>
            }

        </div>

    </div>

    <div class="clearfix"></div>
    <div id="Dialog-Box" class="ICDSearch">
        @Html.Partial("_ICDSearch")
    </div>


    @*}*@
</section>
<div class="modal fade" id="PatientEmailSearchModal" role="dialog">
    <div class="modal-dialog modal-lg" style="width:950px;">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header" style="padding-bottom:0;">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Search Patient Name</h4>
            </div>
            <div class="modal-body">
                <div>
                    <div id="searchPatient">
                        <div class="row SearchFilterContainer" id="SearchFilterContainer">
                            <div class="col-sm-6 col-md-3">
                                <div class=headrightcont>First Name</div>
                                <input id="txtPatientFirstName" type="text" class="applitextfield2" name="Fname" value="" />
                            </div>
                            <div class="col-sm-6 col-md-3">
                                <div class=headrightcont>Last Name</div>
                                <input id="txtPatientLastName" type="text" class="applitextfield2" name="Lname" value="" />
                            </div>
                           
                            <div class="col-sm-6 col-md-3">
                                <div class="headrightcont">SSN</div>
                                <input id="txtPatientSSN" type="text" class="applitextfield2" name="SSN" value="" />
                            </div>
                            <div class="col-sm-6 col-md-3">
                                <div class="headrightcont">Phone</div>
                                <input id="txtPatientPhone" type="text" class="applitextfield2 UsCellFormat" name="Phone" value="" />
                            </div>
                            <div class="col-sm-6 col-md-3">
                                <div class=headrightcont>City</div>
                                <input id="txtPatientCity" type="text" class="applitextfield2" name="City" value="" />
                            </div>
                            <div class="col-sm-6 col-md-3">
                                <div class=headrightcont>State</div>
                                <input id="txtPatientState" type="text" class="applitextfield2" name="State" value="" />
                            </div>
                            <div class="col-sm-6 col-md-3">
                                <div class="headrightcont">Zip Code</div>
                                <input id="txtPatientZipCode" type="text" class="applitextfield2" name="ZipCode" value="" maxlength="5" />
                            </div>
                            <div class="col-sm-6 col-md-3">
                                <div class="headrightcont">&nbsp;</div>
                                <button class="btn btn-success fnSearchForPatient1" onclick="fnSearchForPatient();">Search</button>
                            </div>
                        </div>
                        <div class="SearchResultContainer1">
                            <table class="table table-bordered table-scroll" id="tblPatientList">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>DOB</th>
                                        <th>Email</th>
                                        @*<th>Mob No</th>
                                        <th>Home Phone</th>
                                        <th>Address</th>*@
                                    </tr>
                                </thead>
                                <tbody> </tbody>
                            </table>

                            <div id="div_noRecPatient" style="text-align: center; vertical-align: middle; line-height: 38px; display:none;"><label style='color:red'>There no records are found !!</label></div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <input type="hidden" id="hdToCC" value="" />
                <button type="button" class="btn btn-warning" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>
<script>
    function fnMedicalNecessity(obj, KneeBraceCustomForm_Id) {
        if ($(obj).is(":checked")) {
            var url = "@Url.Action("MedicalNecessityPDF", "KneeBraceCustomForm", new { Area = "DmeForm" })" + "?id=" + KneeBraceCustomForm_Id;
            //fnShowPopupForDetail(url);
            popupwindow(url, 'Medical Necessity', 1000, 800);
        }
    }
</script>

<script type="text/javascript">
    $(document).on("click", ".PatientEmailSearchModal", function () {
        var myBookId = $(this).data('id');
        $("#btnTo").val(myBookId);
    });
    $(document).ready(function () {
        $("#KneeBraceCustomForm_IsCustomOAMedialOffLoader_01208").focus();
    });
</script>
<script type="text/javascript">
    var k1 = "";
    var ccto = "";

    function fnSearchForPatient() {
        $.ajax({
            url: '@Url.Action("SearchForPatient", "KneeBraceCustomForm")',
            type: "GET",
            dataType:"JSON",
            data: {
                FirstName: $('#txtPatientFirstName').val(),
                LastName: $('#txtPatientLastName').val(),
                SSN: $('#txtPatientSSN').val(),
                Email: $('#txtPatientEmail').val(),
                Phone: $('#txtPatientPhone').val(),
                City: $('#txtPatientCity').val(),
                State: $('#txtPatientState').val(),
                ZipCode: $('#txtPatientZipCode').val()
            },
            success: function (json) {
                var count = 1;
                $("#tblPatientList tbody").html('');
                for (var i = 0; i < json.length; i++) {
                    var __date = json[i].DOB;
                    //alert('DOB:' + __date);
                    var dateString = __date.substr(6);
                    var currentTime = new Date(parseInt(dateString));
                    var month;
                    if (currentTime.getMonth() < 10)
                    {
                        month = currentTime.getMonth() + 1;
                        month = '0' + month.toString();
                    }
                        
                    else
                        month = currentTime.getMonth() + 1;
                    var day; 
                    if (currentTime.getDate() < 10)
                    {

                        day = currentTime.getDate();
                        day = '0' + day.toString();
                    }
                    else
                    {
                        day = currentTime.getDate();
                    }
                   
                    var year = currentTime.getFullYear();
                    var date = month + "-" + day + "-" + year;
                    //alert(date);
                    var row = "<tr onclick='fnSelectPatientRow(this);'>" +
                                        "<td>" + count + "</td>" +
                                       "<td>" + json[i].First_Name + "</td>" +
                                        "<td>" + json[i].Last_Name + "</td>" +
                                        "<td>" + date + "</td>" +
                                         "<td>" + json[i].Email + "</td>" +
                                        //"<td>" + json[i].MobNo + " </td>" +
                                        //"<td>" + json[i].Email + "</td>" +
                                        //"<td>" + json[i].MobNo + " </td>" +
                                        //"<td>" + json[i].Phone2 + "</td>" +
                                        "<td> <input type='hidden' name='' value='" + json[i].Patient_Id + "' class='patientID' /><input type='hidden' name='' value='" + json[i].Email + "' class='patientEmail' />" + json[i].Address + "</td>" +
                                        "<input type='hidden' name='" + "hdn__" + count + "' id='" + "hdn__" + count + "' value='" + date + "' class='patientID' />" +
                                    "</tr>";
                    $("#tblPatientList tbody").append(row);
                    count = count + 1;
                }
                if (json.length == 0) {
                    $("#div_noRecPatient").show();
                    $("#KneeBraceCustomForm_Patient_Name").val("");
                    $("#Condition_PatientId").val("");
                }
            },
            error: function (msg) {
            },
        });
    }

    function fnShowPatientSearch() {
        $('#_SearchPatient').modal();

        $('#txtPatientFirstName').val("");
        $('#txtPatientLastName').val("");
        //$('#txtPatientFirstDOB').val("");
        $('#txtPatientLastSSN').val("");
        $('#txtPatientPhone').val("");
        $('#txtPatientCity').val("");
        $('#txtPatientState').val("");
        $('#txtPatientZipCode').val("");
    }
    //For Patient
    function fnSelectPatientRow(obj) {
        //alert(obj);
        $("#tblPatientList tbody tr").removeClass('selectedRow');
        $(obj).addClass('selectedRow');
        $('#PatientEmailSearchModal').modal('hide');
        $("#KneeBraceCustomForm_Patient_Name").val($($(obj).find('td')[1]).html() + " " + $($(obj).find('td')[2]).html());
        //$("#KneeBraceCustomForm_DOB").val($($(obj).find('td')[3]).html());
        //$("#KneeBraceCustomForm_DOB").val($($(obj).find('input')[3]).val());
        $("#KneeBraceCustomForm_Patient_Id").val($($(obj).find('input')[0]).val());
        $("#KneeBraceCustomForm_DOB").val($($(obj).find('td')[3]).html());
        //$("#PatientUser_Email").val($($(obj).find('input')[1]).val());

        //if ($("#hdToCC").val() == "To") {
        //    k1 = k1 + ";" + $($(obj).find('input')[1]).val();
        //    $("#EmailTo").val(k1.substr(1));

        //}
        //else if ($("#hdToCC").val() == "CC") {
        //    ccto = ccto + ";" + $($(obj).find('input')[1]).val();
        //    $("#EmailCC").val(ccto.substr(1));

        //}
    }



</script>
<script type="text/javascript">
    $(document).ready(function () {

        $("#CheckBoxAsRadioButton").hide();
        $("#Patient_Name").hide();
        $("#PatientDOB").hide();
        $("#Fitting_ThighCircumference").hide();
        $("#Fitting_CalfCircumference").hide();
        $("#Fitting_KneeOffset").hide();
        $("#Fitting_KneeWidth").hide();
        $("#CirclePosition").hide();
        $("#Gender").hide();
        $("#CompleteLOMN_Initial").hide();
        $("#Therapist_Name").hide();
        $("#Doctor_Name").hide();
        $("#Diagnosis_Desc").hide();
        $("#ICD10Code").hide();        

        $('#KneeBraceCustomForm_DOB').datepicker('setEndDate', new Date());
    });
</script>

<script type="text/javascript">



    $(function () {
        $("#addRows").click(function () {
            //counter = 2;
            $("#dvDiagnosis").append("<div class='row'><div id='Div"
                + counter + "' class='col-sm-4 col-md-5 form-group'>" +
                "<input class='form-control Disease_nameForICD'  id='DMEDiognosis_" + counter + "__Diagnosis_Desc' name='DMEDiognosis[" + counter + "].Diagnosis_Desc' type='text'>" +
                "</div><div id='Div1" + counter + "' class='col-sm-4 col-md-5 form-group'>" +
                "<input class='form-control ICD_CodeForICD' id='DMEDiognosis_" + counter + "__ICD10Code' name='DMEDiognosis[" + counter + "].ICD10Code'  type='text'>" +
                "</div><div id='Div2" + counter +
                "' class='col-sm-4 col-md-2 form-group'> <button  class='addbutt' type='button' style='margin-top:0;' title='Remove New Diagnosis' onclick='removeRow("
                + counter + ")'><i class='fa fa-remove' aria-hidden='true'></i></button><input type='hidden' id='DMEDiognosis_" + counter + "__DMEDiagnosis_Id' name='DMEDiognosis[" + counter + "].DMEDiagnosis_Id' value='' class='icdidForICD' /></div></div>")
            BindOnFocusForICD();
            counter++;
        });
    });

    function removeRow(cnt) {
        $("#Div" + cnt).remove();
        $("#Div1" + cnt).remove();
        $("#Div2" + cnt).remove();
        counter--;
    }
    $('#Dialog-Box').dialog({
        autoOpen: false,
        height: 500,
        width: 700,
        modal: true
    });

    function OpenDialog() {

        var name = $('#Name').val();
        var address = $('#Address').val();
        $('#Dialog-Name').val(name);
        $('#Dialog-Address').val(address);
        $('#Dialog-Box').dialog("open");
    }


    function SearchICD10() {

        // $('#Dialog-Box').dialog("close");

        @*$.ajax({
            url: '@Url.Action("ActionName", "ControllerName")',
            type: 'POST',
            data: {
                code: $('#Dialog-Name').val()

            },
            success: function (msg) {
            },
            error: function (msg) {
            }
        });*@


    }



    //var formData = $('#Create').serializeObject();
    //$.extend(formData, { 'count': counter }); //Send Additional data




    function closeDiv() {
        $('#Dialog-Box').dialog("close");
    }
    function fnEnableDisableTextbox(obj, textbox) {
        $('.enabledisable').attr("disabled", "disabled");
        $('.enabledisable').val('');
        if ($(obj).is(":checked")) {
            $('#' + textbox).removeAttr("disabled");
            $('.checkone1').not(obj).attr("checked", false);
        }
    }
</script>

<script type="text/javascript">

    var ModelNo = "";
    var Desc = "";

    function fnchooseFreestyle(m) {


        ModelNo = $("#Desc_" + m).text().trim();
        //alert(ModelNo);
        //Model=01208
        if (ModelNo == "01208") {
            Desc = "";
            Desc = "Custom OA Medial Off-Loader";
            //Set the PO Item Description + PO Code
            $("#hdnItemDesc").val(Desc);
            $("#hdnItemCode").val(ModelNo);
            //alert(Desc);
        }
        if (ModelNo == "01300") {
            Desc = "";
            Desc = "Custom OA Lateral Off-Loader";
            //Set the PO Item Description + PO Code
            $("#hdnItemDesc").val(Desc);
            $("#hdnItemCode").val(ModelNo);
            //alert(Desc);
        }
        if (ModelNo == "01207") {
            Desc = "";
            Desc = "Custom OA Lateral Off-Loader";
            //Set the PO Item Description + PO Code
            $("#hdnItemDesc").val(Desc);
            $("#hdnItemCode").val(ModelNo);
            //alert(Desc);
        }


        $.ajax({
            type: "POST",
            url: '@Url.Action("GetItemDesc", "KneeBraceCustomForm")',
            data: "{'ItemDesc':'" + $("#hdnItemDesc").val().trim() + "','ItemCode':'" + $("#hdnItemCode").val().trim()+"'}",
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            cache: false,
            success: function (data) {
                //alert(data);

                var desc = data;
            },
            error: function () {
                alert("Failed to load Item");
            }
        });
        //End
    }


</script>


    <script type="text/javascript">

        function validateInputs() {

            var flag = true;
            var Is_01208 = document.getElementById("KneeBraceCustomForm_IsCustomOAMedialOffLoader_01208");
            var Is_01300 = document.getElementById("KneeBraceCustomForm_IsCustomOALateralOffLoader_01300");
            var Is_01207 = document.getElementById("KneeBraceCustomForm_IsCustomLigamentBrace_01207");
            var pName = document.getElementById("KneeBraceCustomForm_Patient_Name");
            var dob = document.getElementById("KneeBraceCustomForm_DOB");
            var ThighCircumference = document.getElementById("KneeBraceCustomForm_Fitting_ThighCircumference");
            var CalfCircumference = document.getElementById("KneeBraceCustomForm_Fitting_CalfCircumference");
            var KneeOffset  = document.getElementById("KneeBraceCustomForm_Fitting_KneeOffset");
            var KneeWidth = document.getElementById("KneeBraceCustomForm_Fitting_KneeWidth");
            var CirclePosition = document.getElementById("KneeBraceCustomForm_CirclePosition");
            var CirclePosition = document.getElementById("KneeBraceCustomForm_CirclePosition");
            var Gender = document.getElementById("KneeBraceCustomForm_Gender");
            var Initial = document.getElementById("Prescription_CompleteLOMN_Initial");
            var Therapist_Name = document.getElementById("Prescription_Therapist_Name");
            var Doctor = document.getElementById("Prescription_Doctor_Name");
            var Diagnosis_Desc = document.getElementById("DMEDiognosis_0__Diagnosis_Desc");
            var ICD10Code = document.getElementById("DMEDiognosis_0__ICD10Code");

            if (!(Is_01208 == undefined || Is_01300==undefined || Is_01207==undefined)){
                if (!(Is_01208.checked || Is_01300.checked || Is_01207.checked)) {
                    $("#CheckBoxAsRadioButton").show();
                    $("#CheckBoxAsRadioButton").text("Please check the checkbox");
                    Is_01208.focus();
                    flag = false;
                }
                else {
                    $("#CheckBoxAsRadioButton").hide();
                    $("#CheckBoxAsRadioButton").text("");
                }
            }

            if(ThighCircumference.value!=undefined){
                if (ThighCircumference.value == null || ThighCircumference.value == "" || ThighCircumference.value == '') {
                    $("#Fitting_ThighCircumference").show();
                    $("#Fitting_ThighCircumference").text("Enter Thigh Circumference");
                    Fitting_ThighCircumference.focus();
                    flag = false;
                }
                else {
                    $("#Fitting_ThighCircumference").hide();
                    $("#Fitting_ThighCircumference").text("");
                }
            }

            if (CalfCircumference.value != undefined) {
                if (CalfCircumference.value == null || CalfCircumference.value == "" || CalfCircumference.value == '') {
                    $("#Fitting_CalfCircumference").show();
                    $("#Fitting_CalfCircumference").text("Enter Calf Circumference");
                    CalfCircumference.focus();
                    flag = false;
                }
                else {
                    $("#Fitting_CalfCircumference").hide();
                    $("#Fitting_CalfCircumference").text("");
                }
            }

            if (KneeOffset.value != undefined) {
                if (KneeOffset.value == null || KneeOffset.value == "" || KneeOffset.value == '') {
                    $("#Fitting_KneeOffset").show();
                    $("#Fitting_KneeOffset").text("Enter Knee Offset");
                    KneeOffset.focus();
                    flag = false;
                }
                else {
                    $("#Fitting_KneeOffset").hide();
                    $("#Fitting_KneeOffset").text("");
                }
            }


            if (Diagnosis_Desc.value != undefined) {
                if (Diagnosis_Desc.value == null || Diagnosis_Desc.value == "" || Diagnosis_Desc.value == '') {
                    $("#Diagnosis_Desc").show();
                    $("#Diagnosis_Desc").text("Enter Diagnosis_Desc");
                    Diagnosis_Desc.focus();
                    flag = false;
                }
                else {
                    $("#Diagnosis_Desc").hide();
                    $("#Diagnosis_Desc").text("");
                }
            }

            if (ICD10Code.value != undefined) {
                if (ICD10Code.value == null || ICD10Code.value == "" || ICD10Code.value == '') {
                    $("#ICD10Code").show();
                    $("#ICD10Code").text("Enter ICD10 Code");
                    ICD10Code.focus();
                    flag = false;
                }
                else {
                    $("#ICD10Code").hide();
                    $("#ICD10Code").text("");
                }
            }

            if (CirclePosition != undefined) {
                if (!CirclePosition.checked) {
                    $("#CirclePosition").show();
                    $("#CirclePosition").text("Select Circle Position");
                    CirclePosition.focus();
                    flag = false;
                }
                else {
                    $("#CirclePosition").text("");
                    $("#CirclePosition").hide();
                }
            }
            
            if (Gender != undefined) {
                if (!Gender.checked) {
                    $("#Gender").show();
                    $("#Gender").text("Select Gender");
                    Gender.focus();
                    flag = false;
                }
                else {
                    $("#Gender").text("");
                    $("#Gender").hide();
                }
            }


            if (pName != undefined) {
                if (pName.value == null || pName.value == "" || pName.value == '') {
                    $("#Patient_Name").show();
                    $("#Patient_Name").text("Enter Patient Name");
                    pName.focus();
                    flag = false;
                }
                else {
                    $("#Patient_Name").text("");
                    $("#Patient_Name").hide();
                }
            }

            if (dob != undefined) {
                if (dob.value == null || dob.value == "" || dob.value == '') {
                    $("#PatientDOB").show();
                    $("#PatientDOB").text("Enter Date of Birth.");
                    dob.focus();
                    flag = false;
                }
                else {
                    $("#PatientDOB").text("");
                    $("#PatientDOB").hide();
                }
            }


            if (Initial != undefined) {
                if (Initial.value == null || Initial.value == "" || Initial.value == '') {
                    $("#CompleteLOMN_Initial").show();
                    $("#CompleteLOMN_Initial").text("Enter Initial Value.");
                    Initial.focus();
                    flag = false;
                }
                else {
                    $("#CompleteLOMN_Initial").text("");
                    $("#CompleteLOMN_Initial").hide();
                }
            }


            if (dob != undefined) {
                if (dob.value == null || dob.value == "" || dob.value == '') {
                    $("#PatientDOB").show();
                    $("#PatientDOB").text("Enter Date of Birth.");
                    dob.focus();
                    flag = false;
                }
                else {
                    $("#PatientDOB").text("");
                    $("#PatientDOB").hide();
                }
            }

            if (Initial != undefined) {
                if (Initial.value == null || Initial.value == "" || Initial.value == '') {
                    $("#CompleteLOMN_Initial").show();
                    $("#CompleteLOMN_Initial").text("Enter Initial Value.");
                    Initial.focus();
                    flag = false;
                }
                else {
                    $("#CompleteLOMN_Initial").text("");
                    $("#CompleteLOMN_Initial").hide();
                }
            }


            if ($("#Prescription_IsItemReqByTherapist").is(':checked')) {
                if (Therapist_Name.value == "") {
                    $("#Therapist_Name").show();
                    $("#Therapist_Name").text("Enter Therapist Name");
                    Therapist_Name.focus();
                    flag = false;
                }
                else {
                    $("#Therapist_Name").hide();
                }
            }
            else if ($("#Prescription_IsItemReqByDoctor").is(':checked')) {

                if (Doctor.value == "") {

                    $("#Doctor_Name").show();
                    $("#Doctor_Name").text("Enter Doctor Name");
                    Doctor.focus();
                    flag = false;

                }
                else {
                    $("#Doctor_Name").text("");
                    $("#Doctor_Name").hide();
                }
            }

            if ($("#Prescription_IsItemReqByPatient").is(':checked')) {
                if ((Doctor.value == "") && (Therapist_Name.value == "")) {
                    return true;
                }
            }
            else if ((Therapist_Name.value == "") && (Doctor.value == "")) {
                $("#Therapist_Name").show();
                $("#Therapist_Name").text("Enter Therapist Name");
                Therapist_Name.focus();
                $("#Doctor_Name").show();
                $("#Doctor_Name").text("Enter Doctor Name");
                Doctor.focus();
                flag = false;
            }
            //else {
            //    flag = true;
            //}

        
        return flag;
    }
</script>